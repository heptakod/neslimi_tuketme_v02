<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8" />
    <title>Arama Sonuçları</title>
</head>
<body>
    <h1>Arama Sonuçları</h1>
    <div id="results"></div>

    <script>
        // URL'den arama kelimesini alıyoruz
        const params = new URLSearchParams(window.location.search);
        const query = params.get('q')?.toLowerCase();

        const resultsDiv = document.getElementById('results');

        if (!query) {
            resultsDiv.innerText = "Arama kelimesi bulunamadı.";
        } else {
            resultsDiv.innerText = `“${query}” için arama yapılıyor...`;

            // Buraya veri kaynaklarını (API linklerini) ekle
            const apiLinks = [
                // Bölge 1 Memeliler JSON API linki,
                // Bölge 1 Kuşlar JSON API linki,
                // ... diğer 7x13 API linkleri
            ];

            // API'den tüm verileri çek ve ara
            Promise.all(apiLinks.map(link => fetch(link).then(res => res.json())))
                .then(allDataArrays => {
                    // allDataArrays her API linkinden gelen array'lerin dizisi
                    // Hepsini tek diziye birleştir
                    const allData = allDataArrays.flat();

                    // Arama
                    const filtered = allData.filter(item => {
                        // item.yayginIsim, item.latinceIsim, item.aciklama alanları olduğunu varsayıyoruz
                        return (item.yayginIsim?.toLowerCase().includes(query) ||
                            item.latinceIsim?.toLowerCase().includes(query) ||
                            item.aciklama?.toLowerCase().includes(query));
                    });

                    if (filtered.length === 0) {
                        resultsDiv.innerText = "Arama kriterlerinize uygun canlı bulunamadı.";
                    } else {
                        resultsDiv.innerHTML = '';
                        filtered.forEach(canli => {
                            const card = document.createElement('div');
                            card.style.border = '1px solid #ccc';
                            card.style.margin = '10px';
                            card.style.padding = '10px';

                            card.innerHTML = `
            <h3>${canli.yayginIsim} (${canli.latinceIsim})</h3>
            <img src="${canli.foto}" alt="${canli.yayginIsim}" width="150" />
            <p>${canli.aciklama}</p>
            <p><b>Tehlike Derecesi:</b> ${canli.tehlikeDerecesi}</p>
          `;

                            resultsDiv.appendChild(card);
                        });
                    }
                })
                .catch(err => {
                    resultsDiv.innerText = "Veriler yüklenirken hata oluştu.";
                    console.error(err);
                });
        }

    </script>

</body>
</html>

